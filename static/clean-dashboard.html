<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AImax æ™ºèƒ½äº¤æ˜“ç³»çµ± v3.0 - ç°¡æ½”ç‰ˆ</title>
    
    <!-- å®‰å…¨æ¨™é ­ -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    
    <!-- ç¦æ­¢æœç´¢å¼•æ“ç´¢å¼• -->
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    
    <!-- å…§åµŒCSSæ¨£å¼ -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        /* ç™»å…¥ç•Œé¢æ¨£å¼ */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .login-card {
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
        }
        
        .logo {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo h1 {
            font-size: 28px;
            color: #6c5ce7;
            margin-bottom: 8px;
        }
        
        .logo p {
            color: #666;
            font-size: 14px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #6c5ce7;
        }
        
        .login-btn {
            width: 100%;
            padding: 14px;
            background: #6c5ce7;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .login-btn:hover {
            background: #5a4fcf;
        }
        
        .error-message, .lockout-message {
            margin-top: 15px;
            padding: 12px;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .error-message {
            background: #ffe6e6;
            color: #d63031;
            border: 1px solid #fab1a0;
        }
        
        .lockout-message {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .security-notice {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #6c5ce7;
        }
        
        .security-notice h3 {
            color: #6c5ce7;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .security-notice p {
            font-size: 13px;
            line-height: 1.5;
            color: #666;
        }
        
        /* ä¸»æ§åˆ¶é¢æ¿æ¨£å¼ */
        .dashboard-container {
            display: none;
            min-height: 100vh;
            background: #f8f9fa;
        }
        
        .header {
            background: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header h1 {
            color: #6c5ce7;
            font-size: 24px;
        }
        
        .version {
            color: #666;
            font-size: 14px;
            margin-left: 10px;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .current-time {
            color: #666;
            font-size: 14px;
        }
        
        .logout-btn {
            padding: 8px 16px;
            background: #e17055;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .logout-btn:hover {
            background: #d63031;
        }
        
        /* å¡ç‰‡ç¶²æ ¼ */
        .cards-grid {
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .card-header h3 {
            font-size: 18px;
            color: #333;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ddd;
        }
        
        .status-indicator.online {
            background: #00b894;
            box-shadow: 0 0 10px rgba(0,184,148,0.3);
        }
        
        .status-indicator.offline {
            background: #e17055;
        }
        
        .card-value {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
            font-family: 'Courier New', monospace;
        }
        
        .price-value {
            color: #00b894;
        }
        
        .card-subtitle {
            color: #666;
            font-size: 14px;
        }
        
        /* æ§åˆ¶æŒ‰éˆ• */
        .controls {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .controls h2 {
            margin-bottom: 16px;
            color: #333;
        }
        
        .control-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .control-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .refresh-btn {
            background: #00b894;
            color: white;
        }
        
        .refresh-btn:hover {
            background: #00a085;
        }
        
        .log-btn {
            background: #0984e3;
            color: white;
        }
        
        .log-btn:hover {
            background: #0770c4;
        }
        
        .emergency-btn {
            background: #e17055;
            color: white;
        }
        
        .emergency-btn:hover {
            background: #d63031;
        }
        
        /* äº¤æ˜“æ­·å²è¡¨æ ¼ */
        .trading-history {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .trading-history h2 {
            margin-bottom: 16px;
            color: #333;
        }
        
        .history-table {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        
        .history-table table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .history-table th {
            background: #6c5ce7;
            color: white;
            padding: 16px;
            text-align: left;
            font-weight: 600;
        }
        
        .history-table td {
            padding: 16px;
            border-bottom: 1px solid #eee;
        }
        
        .history-table tr:hover {
            background: #f8f9fa;
        }
        
        .trade-buy {
            color: #00b894;
            font-weight: 600;
        }
        
        .trade-sell {
            color: #e17055;
            font-weight: 600;
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .cards-grid {
                grid-template-columns: 1fr;
                padding: 10px;
            }
            
            .control-buttons {
                justify-content: center;
            }
            
            .history-table {
                overflow-x: auto;
            }
        }
        
        /* è¼‰å…¥å‹•ç•« */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #6c5ce7;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* åƒ¹æ ¼æ›´æ–°å‹•ç•« */
        .price-update {
            animation: priceFlash 0.3s ease-in-out;
        }
        
        @keyframes priceFlash {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <!-- ç™»å…¥ç•Œé¢ -->
    <div id="loginContainer" class="login-container">
        <div class="login-card">
            <div class="logo">
                <h1>ğŸ¤– AImax v3.0</h1>
                <p>æ™ºèƒ½äº¤æ˜“æ§åˆ¶é¢æ¿ - ç°¡æ½”ç‰ˆ</p>
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">å¸³è™Ÿ</label>
                    <input type="text" id="username" name="username" required autocomplete="username">
                </div>
                
                <div class="form-group">
                    <label for="password">å¯†ç¢¼</label>
                    <input type="password" id="password" name="password" required autocomplete="current-password">
                </div>
                
                <button type="submit" class="login-btn">ğŸ” å®‰å…¨ç™»å…¥</button>
                
                <div id="loginError" class="error-message" style="display: none;"></div>
                <div id="lockoutMessage" class="lockout-message" style="display: none;"></div>
            </form>
            
            <div class="security-notice">
                <h3>âš ï¸ å®‰å…¨æé†’</h3>
                <p>
                    â€¢ æ­¤ç‚ºç§æœ‰äº¤æ˜“ç³»çµ±ï¼Œåƒ…é™æˆæ¬Šç”¨æˆ¶ä½¿ç”¨<br>
                    â€¢ è«‹å‹¿åœ¨å…¬å…±ç¶²è·¯ç’°å¢ƒä¸‹ç™»å…¥<br>
                    â€¢ ä½¿ç”¨å®Œç•¢è«‹è¨˜å¾—ç™»å‡º<br>
                    â€¢ 85%å‹ç‡äº¤æ˜“ç­–ç•¥å·²å•Ÿç”¨
                </p>
            </div>
        </div>
    </div>

    <!-- ä¸»æ§åˆ¶é¢æ¿ -->
    <div id="dashboardContainer" class="dashboard-container">
        <!-- é ‚éƒ¨å°èˆª -->
        <header class="header">
            <div>
                <h1>ğŸ¤– AImax æ™ºèƒ½äº¤æ˜“ç³»çµ±</h1>
                <span class="version">v3.0 - ç°¡æ½”ç‰ˆ | 85%å‹ç‡ç›®æ¨™</span>
            </div>
            <div class="header-right">
                <span id="currentTime" class="current-time"></span>
                <button id="logoutBtn" class="logout-btn">ğŸšª ç™»å‡º</button>
            </div>
        </header>

        <!-- ç‹€æ…‹å¡ç‰‡ -->
        <div class="cards-grid">
            <!-- BTCåƒ¹æ ¼å¡ç‰‡ -->
            <div class="card">
                <div class="card-header">
                    <h3>ğŸ’° BTC/TWD åƒ¹æ ¼ (MAX)</h3>
                    <span id="priceIndicator" class="status-indicator"></span>
                </div>
                <div id="btcPrice" class="card-value price-value">è¼‰å…¥ä¸­...</div>
                <div id="priceChange" class="card-subtitle">è®ŠåŒ–: --</div>
                <div id="lastPriceUpdate" class="card-subtitle">æ›´æ–°æ™‚é–“: --</div>
            </div>

            <!-- ç³»çµ±ç‹€æ…‹å¡ç‰‡ -->
            <div class="card">
                <div class="card-header">
                    <h3>ğŸ”„ ç³»çµ±ç‹€æ…‹</h3>
                    <span id="systemIndicator" class="status-indicator"></span>
                </div>
                <div id="systemStatus" class="card-value">è¼‰å…¥ä¸­...</div>
                <div id="systemUptime" class="card-subtitle">é‹è¡Œæ™‚é–“: --</div>
                <div id="lastSystemUpdate" class="card-subtitle">æ›´æ–°æ™‚é–“: --</div>
            </div>

            <!-- äº¤æ˜“çµ±è¨ˆå¡ç‰‡ -->
            <div class="card">
                <div class="card-header">
                    <h3>ğŸ“Š äº¤æ˜“çµ±è¨ˆ</h3>
                    <span class="status-indicator online"></span>
                </div>
                <div id="totalTrades" class="card-value">0</div>
                <div id="winRate" class="card-subtitle">å‹ç‡: 85%+ ç›®æ¨™</div>
                <div id="totalProfit" class="card-subtitle">ç¸½ç²åˆ©: --</div>
            </div>

            <!-- ç•¶å‰æŒå€‰å¡ç‰‡ -->
            <div class="card">
                <div class="card-header">
                    <h3>ğŸ’¼ ç•¶å‰æŒå€‰</h3>
                    <span id="positionIndicator" class="status-indicator"></span>
                </div>
                <div id="currentPosition" class="card-value">ç„¡æŒå€‰</div>
                <div id="positionValue" class="card-subtitle">åƒ¹å€¼: NT$0</div>
                <div id="positionProfit" class="card-subtitle">æµ®å‹•æç›Š: --</div>
            </div>
        </div>

        <!-- æ§åˆ¶æŒ‰éˆ• -->
        <div class="controls">
            <h2>ğŸ® ç³»çµ±æ§åˆ¶</h2>
            <div class="control-buttons">
                <button id="refreshPrice" class="control-btn refresh-btn">ğŸ’° åˆ·æ–°åƒ¹æ ¼</button>
                <button id="viewLogs" class="control-btn log-btn">ğŸ“‹ æŸ¥çœ‹æ—¥èªŒ</button>
                <button id="emergencyStop" class="control-btn emergency-btn">ğŸš¨ ç·Šæ€¥åœæ­¢</button>
            </div>
        </div>

        <!-- äº¤æ˜“æ­·å² -->
        <div class="trading-history">
            <h2>ğŸ“ˆ æœ€è¿‘äº¤æ˜“è¨˜éŒ„</h2>
            <div class="history-table">
                <table>
                    <thead>
                        <tr>
                            <th>æ™‚é–“</th>
                            <th>é¡å‹</th>
                            <th>åƒ¹æ ¼</th>
                            <th>æ•¸é‡</th>
                            <th>ç²åˆ©/è™§æ</th>
                            <th>ç‹€æ…‹</th>
                        </tr>
                    </thead>
                    <tbody id="tradesTableBody">
                        <tr>
                            <td colspan="6" style="text-align: center; color: #666;">è¼‰å…¥äº¤æ˜“æ•¸æ“šä¸­...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- å…§åµŒJavaScript -->
    <script>
        // å…¨å±€å‘½åç©ºé–“ï¼Œé¿å…è¡çª
        window.CleanDashboard = {
            // é…ç½®
            config: {
                maxApiUrl: 'https://max-api.maicoin.com/api/v2/tickers/btctwd',
                updateInterval: 30000, // 30ç§’
                loginAttempts: 0,
                maxLoginAttempts: 5,
                lockoutTime: 15 * 60 * 1000 // 15åˆ†é˜
            },
            
            // ç‹€æ…‹
            state: {
                isAuthenticated: false,
                currentPrice: null,
                lastUpdate: null,
                systemStartTime: new Date(),
                priceUpdateTimer: null
            },
            
            // åˆå§‹åŒ–
            init() {
                console.log('ğŸš€ AImax v3.0 ç°¡æ½”ç‰ˆå„€è¡¨æ¿åˆå§‹åŒ–ä¸­...');
                this.bindEvents();
                this.updateCurrentTime();
                setInterval(() => this.updateCurrentTime(), 1000);
                
                // æª¢æŸ¥æ˜¯å¦å·²ç™»å…¥
                if (this.checkAuthStatus()) {
                    this.showDashboard();
                } else {
                    this.showLogin();
                }
            },
            
            // ç¶å®šäº‹ä»¶
            bindEvents() {
                // ç™»å…¥è¡¨å–®
                document.getElementById('loginForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleLogin();
                });
                
                // ç™»å‡ºæŒ‰éˆ•
                document.getElementById('logoutBtn').addEventListener('click', () => {
                    this.handleLogout();
                });
                
                // æ§åˆ¶æŒ‰éˆ•
                document.getElementById('refreshPrice').addEventListener('click', () => {
                    this.refreshPrice();
                });
                
                document.getElementById('viewLogs').addEventListener('click', () => {
                    this.viewLogs();
                });
                
                document.getElementById('emergencyStop').addEventListener('click', () => {
                    this.emergencyStop();
                });
            },
            
            // æ›´æ–°ç•¶å‰æ™‚é–“
            updateCurrentTime() {
                const timeElement = document.getElementById('currentTime');
                if (timeElement) {
                    timeElement.textContent = new Date().toLocaleString('zh-TW');
                }
            },
            
            // æª¢æŸ¥èªè­‰ç‹€æ…‹
            checkAuthStatus() {
                const authData = sessionStorage.getItem('aimax_auth');
                if (authData) {
                    try {
                        const auth = JSON.parse(authData);
                        const now = new Date().getTime();
                        // æª¢æŸ¥æœƒè©±æ˜¯å¦éæœŸï¼ˆ4å°æ™‚ï¼‰
                        if (now - auth.timestamp < 4 * 60 * 60 * 1000) {
                            this.state.isAuthenticated = true;
                            return true;
                        } else {
                            sessionStorage.removeItem('aimax_auth');
                        }
                    } catch (e) {
                        sessionStorage.removeItem('aimax_auth');
                    }
                }
                return false;
            },
            
            // è™•ç†ç™»å…¥
            async handleLogin() {
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                const errorDiv = document.getElementById('loginError');
                const lockoutDiv = document.getElementById('lockoutMessage');
                
                // æ¸…é™¤ä¹‹å‰çš„éŒ¯èª¤ä¿¡æ¯
                errorDiv.style.display = 'none';
                lockoutDiv.style.display = 'none';
                
                // æª¢æŸ¥æ˜¯å¦è¢«é–å®š
                const lockoutData = localStorage.getItem('aimax_lockout');
                if (lockoutData) {
                    const lockout = JSON.parse(lockoutData);
                    const now = new Date().getTime();
                    if (now < lockout.until) {
                        const remainingMinutes = Math.ceil((lockout.until - now) / 60000);
                        lockoutDiv.textContent = `å¸³è™Ÿå·²è¢«é–å®šï¼Œè«‹ç­‰å¾… ${remainingMinutes} åˆ†é˜å¾Œå†è©¦`;
                        lockoutDiv.style.display = 'block';
                        return;
                    } else {
                        localStorage.removeItem('aimax_lockout');
                        this.config.loginAttempts = 0;
                    }
                }
                
                // ç°¡å–®çš„èªè­‰é‚è¼¯ï¼ˆå¯¦éš›æ‡‰ç”¨ä¸­æ‡‰è©²æ›´å®‰å…¨ï¼‰
                if (username === 'admin' && password === 'aimax2025') {
                    // èªè­‰æˆåŠŸ
                    this.state.isAuthenticated = true;
                    sessionStorage.setItem('aimax_auth', JSON.stringify({
                        username: username,
                        timestamp: new Date().getTime()
                    }));
                    this.config.loginAttempts = 0;
                    this.showDashboard();
                    console.log('âœ… ç”¨æˆ¶ç™»å…¥æˆåŠŸ');
                } else {
                    // èªè­‰å¤±æ•—
                    this.config.loginAttempts++;
                    errorDiv.textContent = `ç™»å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥å¸³è™Ÿå¯†ç¢¼ (${this.config.loginAttempts}/${this.config.maxLoginAttempts})`;
                    errorDiv.style.display = 'block';
                    
                    // æª¢æŸ¥æ˜¯å¦éœ€è¦é–å®š
                    if (this.config.loginAttempts >= this.config.maxLoginAttempts) {
                        const lockoutUntil = new Date().getTime() + this.config.lockoutTime;
                        localStorage.setItem('aimax_lockout', JSON.stringify({
                            until: lockoutUntil
                        }));
                        lockoutDiv.textContent = 'ç™»å…¥å¤±æ•—æ¬¡æ•¸éå¤šï¼Œå¸³è™Ÿå·²è¢«é–å®š 15 åˆ†é˜';
                        lockoutDiv.style.display = 'block';
                        errorDiv.style.display = 'none';
                    }
                }
            },
            
            // è™•ç†ç™»å‡º
            handleLogout() {
                if (confirm('ç¢ºå®šè¦ç™»å‡ºå—ï¼Ÿ')) {
                    this.state.isAuthenticated = false;
                    sessionStorage.removeItem('aimax_auth');
                    this.showLogin();
                    this.stopPriceUpdates();
                    console.log('ğŸ“¤ ç”¨æˆ¶å·²ç™»å‡º');
                }
            },
            
            // é¡¯ç¤ºç™»å…¥ç•Œé¢
            showLogin() {
                document.getElementById('loginContainer').style.display = 'flex';
                document.getElementById('dashboardContainer').style.display = 'none';
                document.getElementById('username').value = '';
                document.getElementById('password').value = '';
            },
            
            // é¡¯ç¤ºå„€è¡¨æ¿
            showDashboard() {
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('dashboardContainer').style.display = 'block';
                this.startPriceUpdates();
                this.updateSystemStatus();
                console.log('ğŸ“Š å„€è¡¨æ¿å·²è¼‰å…¥');
            },
            
            // é–‹å§‹åƒ¹æ ¼æ›´æ–°
            startPriceUpdates() {
                // ç«‹å³æ›´æ–°ä¸€æ¬¡
                this.updatePrice();
                
                // è¨­ç½®å®šæ™‚æ›´æ–°
                this.state.priceUpdateTimer = setInterval(() => {
                    this.updatePrice();
                }, this.config.updateInterval);
            },
            
            // åœæ­¢åƒ¹æ ¼æ›´æ–°
            stopPriceUpdates() {
                if (this.state.priceUpdateTimer) {
                    clearInterval(this.state.priceUpdateTimer);
                    this.state.priceUpdateTimer = null;
                }
            },
            
            // æ›´æ–°åƒ¹æ ¼
            async updatePrice() {
                console.log('ğŸ“¡ æ­£åœ¨å¾MAX APIç²å–BTC/TWDåƒ¹æ ¼...');
                
                try {
                    const response = await fetch(this.config.maxApiUrl, {
                        method: 'GET',
                        headers: {
                            'Accept': 'application/json'
                        },
                        mode: 'cors'
                    });
                    
                    if (!response.ok) {
                        throw new Error(`MAX API éŸ¿æ‡‰éŒ¯èª¤: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    console.log('ğŸ“Š MAX APIéŸ¿æ‡‰æ•¸æ“š:', data);
                    
                    // é©—è­‰æ•¸æ“šæ ¼å¼
                    if (!data.ticker || !data.ticker.last || isNaN(parseFloat(data.ticker.last))) {
                        throw new Error('MAX API è¿”å›ç„¡æ•ˆçš„åƒ¹æ ¼æ•¸æ“š');
                    }
                    
                    const newPrice = parseFloat(data.ticker.last);
                    const oldPrice = this.state.currentPrice;
                    
                    // æ›´æ–°åƒ¹æ ¼é¡¯ç¤º
                    this.displayPrice(newPrice, oldPrice);
                    this.state.currentPrice = newPrice;
                    this.state.lastUpdate = new Date();
                    
                    // æ›´æ–°ç‹€æ…‹æŒ‡ç¤ºå™¨
                    document.getElementById('priceIndicator').className = 'status-indicator online';
                    
                    console.log(`ğŸ’° MAX APIåƒ¹æ ¼å·²æ›´æ–°: NT$${newPrice.toLocaleString()}`);
                    
                } catch (error) {
                    console.error('âŒ MAX APIè«‹æ±‚å¤±æ•—:', error);
                    this.displayPriceError(error.message);
                    document.getElementById('priceIndicator').className = 'status-indicator offline';
                }
            },
            
            // é¡¯ç¤ºåƒ¹æ ¼
            displayPrice(price, oldPrice) {
                const priceElement = document.getElementById('btcPrice');
                const changeElement = document.getElementById('priceChange');
                const updateElement = document.getElementById('lastPriceUpdate');
                
                if (priceElement) {
                    priceElement.textContent = `NT$${price.toLocaleString()}`;
                    priceElement.classList.add('price-update');
                    
                    // åƒ¹æ ¼è®ŠåŒ–é¡è‰²
                    if (oldPrice && price !== oldPrice) {
                        if (price > oldPrice) {
                            priceElement.style.color = '#00b894';
                            changeElement.textContent = `è®ŠåŒ–: â†—ï¸ +${((price - oldPrice) / oldPrice * 100).toFixed(2)}%`;
                            changeElement.style.color = '#00b894';
                        } else {
                            priceElement.style.color = '#e17055';
                            changeElement.textContent = `è®ŠåŒ–: â†˜ï¸ ${((price - oldPrice) / oldPrice * 100).toFixed(2)}%`;
                            changeElement.style.color = '#e17055';
                        }
                    } else {
                        changeElement.textContent = 'è®ŠåŒ–: MAX API å³æ™‚';
                        changeElement.style.color = '#666';
                    }
                    
                    updateElement.textContent = `æ›´æ–°æ™‚é–“: ${new Date().toLocaleString('zh-TW')}`;
                    
                    // ç§»é™¤å‹•ç•«é¡
                    setTimeout(() => {
                        priceElement.classList.remove('price-update');
                        priceElement.style.color = '#00b894';
                    }, 300);
                }
            },
            
            // é¡¯ç¤ºåƒ¹æ ¼éŒ¯èª¤
            displayPriceError(errorMessage) {
                const priceElement = document.getElementById('btcPrice');
                const changeElement = document.getElementById('priceChange');
                const updateElement = document.getElementById('lastPriceUpdate');
                
                if (priceElement) {
                    priceElement.textContent = 'ç„¡æ³•é€£æ¥ MAX API';
                    priceElement.style.color = '#e17055';
                    changeElement.textContent = `éŒ¯èª¤: ${errorMessage}`;
                    changeElement.style.color = '#e17055';
                    updateElement.textContent = `éŒ¯èª¤æ™‚é–“: ${new Date().toLocaleString('zh-TW')}`;
                }
            },
            
            // æ›´æ–°ç³»çµ±ç‹€æ…‹
            updateSystemStatus() {
                const statusElement = document.getElementById('systemStatus');
                const uptimeElement = document.getElementById('systemUptime');
                const updateElement = document.getElementById('lastSystemUpdate');
                const indicatorElement = document.getElementById('systemIndicator');
                
                if (statusElement) {
                    statusElement.textContent = 'é‹è¡Œæ­£å¸¸';
                    indicatorElement.className = 'status-indicator online';
                    
                    // è¨ˆç®—é‹è¡Œæ™‚é–“
                    const uptime = new Date() - this.state.systemStartTime;
                    const hours = Math.floor(uptime / (1000 * 60 * 60));
                    const minutes = Math.floor((uptime % (1000 * 60 * 60)) / (1000 * 60));
                    uptimeElement.textContent = `é‹è¡Œæ™‚é–“: ${hours}å°æ™‚${minutes}åˆ†é˜`;
                    
                    updateElement.textContent = `æ›´æ–°æ™‚é–“: ${new Date().toLocaleString('zh-TW')}`;
                }
            },
            
            // æ‰‹å‹•åˆ·æ–°åƒ¹æ ¼
            refreshPrice() {
                console.log('ğŸ”„ æ‰‹å‹•åˆ·æ–°åƒ¹æ ¼');
                this.updatePrice();
            },
            
            // æŸ¥çœ‹æ—¥èªŒ
            viewLogs() {
                console.log('ğŸ“‹ æ‰“é–‹ç³»çµ±æ—¥èªŒ');
                alert('ç³»çµ±æ—¥èªŒåŠŸèƒ½\n\nâ€¢ MAX API é€£ç·šç‹€æ…‹: æ­£å¸¸\nâ€¢ 85%å‹ç‡ç­–ç•¥: å·²å•Ÿç”¨\nâ€¢ äº¤æ˜“åŸ·è¡Œ: GitHub Actions\nâ€¢ æœ€å¾Œæ›´æ–°: ' + new Date().toLocaleString('zh-TW'));
            },
            
            // ç·Šæ€¥åœæ­¢
            emergencyStop() {
                if (confirm('âš ï¸ ç¢ºå®šè¦åŸ·è¡Œç·Šæ€¥åœæ­¢å—ï¼Ÿ\n\né€™å°‡åœæ­¢æ‰€æœ‰è‡ªå‹•äº¤æ˜“æ´»å‹•ã€‚')) {
                    console.log('ğŸš¨ ç”¨æˆ¶åŸ·è¡Œç·Šæ€¥åœæ­¢');
                    alert('ç·Šæ€¥åœæ­¢å·²è¨˜éŒ„ã€‚\n\nè«‹åˆ°GitHub Actionsé é¢æ‰‹å‹•åœæ­¢æ­£åœ¨é‹è¡Œçš„å·¥ä½œæµã€‚');
                    window.open('https://github.com/winyoulife/AImax-Trading-System/actions', '_blank');
                }
            }
        };
        
        // é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            window.CleanDashboard.init();
        });
        
        // é˜²æ­¢é–‹ç™¼è€…å·¥å…·æ´©éœ²ä¿¡æ¯
        console.clear();
        console.log('%cğŸ”’ AImax v3.0 ç°¡æ½”ç‰ˆäº¤æ˜“ç³»çµ±', 'color: #6c5ce7; font-size: 16px; font-weight: bold;');
        console.log('%câš ï¸  æ­¤ç‚ºç§æœ‰ç³»çµ±ï¼Œæœªç¶“æˆæ¬Šç¦æ­¢è¨ªå•', 'color: #e17055; font-size: 12px;');
        console.log('%cğŸ¯  85%å‹ç‡äº¤æ˜“ç­–ç•¥å·²å•Ÿç”¨', 'color: #00b894; font-size: 12px;');
    </script>
</body>
</html>