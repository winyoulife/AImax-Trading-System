<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AImax Êô∫ËÉΩ‰∫§ÊòìÁ≥ªÁµ± v3.0 - Èõ≤Á´ØÁâà</title>
    
    <!-- ÂÆâÂÖ®Ê®ôÈ†≠ -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    
    <!-- Á¶ÅÊ≠¢ÊêúÁ¥¢ÂºïÊìéÁ¥¢Âºï -->
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    
    <!-- ÂÖßÂµåCSSÊ®£Âºè -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        /* ÁôªÂÖ•ÁïåÈù¢Ê®£Âºè */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .login-card {
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
        }
        
        .logo {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo h1 {
            color: #6c5ce7;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .logo p {
            color: #666;
            font-size: 1.1em;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #6c5ce7;
        }
        
        .login-btn {
            width: 100%;
            padding: 14px;
            background: #6c5ce7;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .login-btn:hover {
            background: #5a4fcf;
        }
        
        .login-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .error-message {
            color: #e17055;
            text-align: center;
            margin-top: 15px;
            padding: 10px;
            background: #ffeaa7;
            border-radius: 6px;
            display: none;
        }
        
        .lockout-message {
            color: #d63031;
            text-align: center;
            margin-top: 15px;
            padding: 10px;
            background: #fab1a0;
            border-radius: 6px;
            display: none;
        }
        
        /* ÂÑÄË°®ÊùøÊ®£Âºè */
        .dashboard {
            display: none;
            min-height: 100vh;
            padding: 20px;
        }
        
        .dashboard-header {
            background: rgba(255,255,255,0.95);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .dashboard-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .dashboard-title h1 {
            color: #6c5ce7;
            font-size: 2em;
            margin-bottom: 5px;
        }
        
        .dashboard-title .subtitle {
            color: #666;
            font-size: 1.1em;
        }
        
        .logout-btn {
            background: #e17055;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s;
        }
        
        .logout-btn:hover {
            background: #d63031;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .card {
            background: rgba(255,255,255,0.95);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        
        .card:hover {
            transform: translateY(-2px);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .card-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #333;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }
        
        .status-indicator.online {
            background: #00b894;
            box-shadow: 0 0 10px rgba(0,184,148,0.5);
        }
        
        .status-indicator.offline {
            background: #e17055;
            box-shadow: 0 0 10px rgba(225,112,85,0.5);
        }
        
        .price-display {
            font-size: 2.5em;
            font-weight: 700;
            color: #00b894;
            margin: 15px 0;
            text-align: center;
        }
        
        .price-change {
            text-align: center;
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        
        .last-update {
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }
        
        .strategy-info {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .strategy-info h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }
        
        .strategy-info p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .emergency-stop {
            background: #d63031;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 15px;
            transition: background 0.3s;
        }
        
        .emergency-stop:hover {
            background: #b71c1c;
        }
        
        .system-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-item {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .stat-value {
            font-size: 1.5em;
            font-weight: 600;
            color: #6c5ce7;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
        
        .price-update {
            animation: priceFlash 0.3s ease-in-out;
        }
        
        @keyframes priceFlash {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* ÈüøÊáâÂºèË®≠Ë®à */
        @media (max-width: 768px) {
            .dashboard-title {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .dashboard-title h1 {
                font-size: 1.5em;
            }
            
            .logout-btn {
                margin-top: 10px;
                align-self: stretch;
            }
            
            .price-display {
                font-size: 2em;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* ËºâÂÖ•ÂãïÁï´ */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #6c5ce7;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- ÁôªÂÖ•ÁïåÈù¢ -->
    <div id="loginContainer" class="login-container">
        <div class="login-card">
            <div class="logo">
                <h1>ü§ñ AImax</h1>
                <p>Êô∫ËÉΩ‰∫§ÊòìÁ≥ªÁµ± v3.0 - Èõ≤Á´ØÁâà</p>
                <p style="font-size: 0.9em; color: #00b894; margin-top: 10px;">85%ÂãùÁéáÁõÆÊ®ô | MAX API Âç≥ÊôÇÂÉπÊ†º</p>
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Â∏≥Ëôü</label>
                    <input type="text" id="username" name="username" required autocomplete="username">
                </div>
                
                <div class="form-group">
                    <label for="password">ÂØÜÁ¢º</label>
                    <input type="password" id="password" name="password" required autocomplete="current-password">
                </div>
                
                <button type="submit" class="login-btn" id="loginBtn">
                    üîê ÁôªÂÖ•Á≥ªÁµ±
                </button>
            </form>
            
            <div id="errorMessage" class="error-message"></div>
            <div id="lockoutMessage" class="lockout-message"></div>
        </div>
    </div>
    
    <!-- ÂÑÄË°®ÊùøÁïåÈù¢ -->
    <div id="dashboard" class="dashboard">
        <div class="dashboard-header">
            <div class="dashboard-title">
                <div>
                    <h1>ü§ñ AImax ‰∫§ÊòìÁ≥ªÁµ±</h1>
                    <p class="subtitle">v3.0 Èõ≤Á´ØÁâà - 85%ÂãùÁéáÊô∫ËÉΩ‰∫§ÊòìÁ≠ñÁï•</p>
                </div>
                <button class="logout-btn" onclick="CleanDashboard.logout()">
                    üö™ ÁôªÂá∫
                </button>
            </div>
        </div>
        
        <div class="dashboard-grid">
            <!-- BTCÂÉπÊ†ºÂç°Áâá -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">üí∞ BTC/TWD Âç≥ÊôÇÂÉπÊ†º</span>
                    <span class="status-indicator online" id="priceIndicator"></span>
                </div>
                
                <div class="price-display" id="btcPrice">ËºâÂÖ•‰∏≠...</div>
                <div class="price-change" id="priceChange">Ê≠£Âú®ÈÄ£Êé• MAX API...</div>
                <div class="last-update" id="lastPriceUpdate">Á≠âÂæÖÊï∏Êìö...</div>
                
                <div class="strategy-info">
                    <h3>üéØ 85%ÂãùÁéáÁ≠ñÁï•</h3>
                    <p>Êô∫ËÉΩÊºîÁÆóÊ≥ïÂ∑≤ÂïüÁî®‰∏¶ÂèóÂà∞‰øùË≠∑</p>
                </div>
            </div>
            
            <!-- Á≥ªÁµ±ÁãÄÊÖãÂç°Áâá -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">üìä Á≥ªÁµ±ÁãÄÊÖã</span>
                    <span class="status-indicator online" id="systemIndicator"></span>
                </div>
                
                <div class="system-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="systemStatus">ÈÅãË°åÊ≠£Â∏∏</div>
                        <div class="stat-label">Á≥ªÁµ±ÁãÄÊÖã</div>
                    </div>
                    
                    <div class="stat-item">
                        <div class="stat-value" id="systemUptime">Ë®àÁÆó‰∏≠...</div>
                        <div class="stat-label">ÈÅãË°åÊôÇÈñì</div>
                    </div>
                    
                    <div class="stat-item">
                        <div class="stat-value">MAX API</div>
                        <div class="stat-label">Êï∏Êìö‰æÜÊ∫ê</div>
                    </div>
                    
                    <div class="stat-item">
                        <div class="stat-value">30Áßí</div>
                        <div class="stat-label">Êõ¥Êñ∞ÈñìÈöî</div>
                    </div>
                </div>
                
                <div class="last-update" id="lastSystemUpdate">Á≥ªÁµ±ÂïüÂãïÊôÇÈñì: Ë®àÁÆó‰∏≠...</div>
                
                <button class="emergency-stop" onclick="CleanDashboard.emergencyStop()">
                    üö® Á∑äÊÄ•ÂÅúÊ≠¢
                </button>
            </div>
        </div>
    </div>
    
    <!-- Áõ¥Êé• MAX API Ë™øÁî® -->
    
    <!-- JavaScript ÈÇèËºØ -->
    <script>
        // ÂÖ®Â±ÄÂëΩÂêçÁ©∫ÈñìÔºåÈÅøÂÖçË°ùÁ™Å
        window.CleanDashboard = {
            // ÈÖçÁΩÆ
            config: {
                maxApiUrl: 'https://max-api.maicoin.com/api/v2/tickers/btctwd', // MAX API v2 Ê≠£Á¢∫Á´ØÈªû
                maxApiUrlProxy: 'http://localhost:5000/api/btc-price', // Êú¨Âú∞‰ª£ÁêÜÔºàÂ¶ÇÊûúÂèØÁî®Ôºâ
                corsProxyUrl: 'https://api.allorigins.win/raw?url=', // CORS ‰ª£ÁêÜ
                updateInterval: 30000, // 30Áßí
                loginAttempts: 0,
                maxLoginAttempts: 5,
                lockoutTime: 15 * 60 * 1000 // 15ÂàÜÈêò
            },
            
            // ÁãÄÊÖã
            state: {
                isAuthenticated: false,
                currentPrice: null,
                lastUpdate: null,
                systemStartTime: new Date(),
                priceUpdateTimer: null
            },
            
            // ÂàùÂßãÂåñ
            init() {
                console.log('üöÄ AImax v3.0 Èõ≤Á´ØÁâàÁ≥ªÁµ±ÂïüÂãï...');
                
                // Á∂ÅÂÆöÁôªÂÖ•Ë°®ÂñÆ‰∫ã‰ª∂
                const loginForm = document.getElementById('loginForm');
                if (loginForm) {
                    loginForm.addEventListener('submit', this.handleLogin.bind(this));
                }
                
                // Ê™¢Êü•ÊòØÂê¶Â∑≤ÁôªÂÖ•
                if (localStorage.getItem('aimax_authenticated') === 'true') {
                    this.showDashboard();
                }
                
                console.log('‚úÖ Á≥ªÁµ±ÂàùÂßãÂåñÂÆåÊàê');
            },
            
            // ËôïÁêÜÁôªÂÖ•
            async handleLogin(event) {
                event.preventDefault();
                
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                const loginBtn = document.getElementById('loginBtn');
                const errorMessage = document.getElementById('errorMessage');
                const lockoutMessage = document.getElementById('lockoutMessage');
                
                // Ê™¢Êü•ÈéñÂÆöÁãÄÊÖã
                const lockoutEnd = localStorage.getItem('aimax_lockout_end');
                if (lockoutEnd && new Date() < new Date(lockoutEnd)) {
                    const remainingTime = Math.ceil((new Date(lockoutEnd) - new Date()) / 1000 / 60);
                    lockoutMessage.textContent = `Â∏≥ËôüÂ∑≤ÈéñÂÆöÔºåË´ãÁ≠âÂæÖ ${remainingTime} ÂàÜÈêòÂæåÂÜçË©¶`;
                    lockoutMessage.style.display = 'block';
                    return;
                }
                
                // È°ØÁ§∫ËºâÂÖ•ÁãÄÊÖã
                loginBtn.disabled = true;
                loginBtn.innerHTML = '<span class="loading"></span> È©óË≠â‰∏≠...';
                errorMessage.style.display = 'none';
                lockoutMessage.style.display = 'none';
                
                // Ê®°Êì¨È©óË≠âÂª∂ÈÅ≤
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // È©óË≠âÊÜëË≠â
                if (username === 'admin' && password === 'aimax2025') {
                    console.log('‚úÖ ÁôªÂÖ•ÊàêÂäü');
                    localStorage.setItem('aimax_authenticated', 'true');
                    localStorage.removeItem('aimax_login_attempts');
                    localStorage.removeItem('aimax_lockout_end');
                    this.showDashboard();
                } else {
                    console.log('‚ùå ÁôªÂÖ•Â§±Êïó');
                    this.config.loginAttempts++;
                    localStorage.setItem('aimax_login_attempts', this.config.loginAttempts.toString());
                    
                    if (this.config.loginAttempts >= this.config.maxLoginAttempts) {
                        const lockoutEnd = new Date(Date.now() + this.config.lockoutTime);
                        localStorage.setItem('aimax_lockout_end', lockoutEnd.toISOString());
                        lockoutMessage.textContent = 'ÁôªÂÖ•Â§±ÊïóÊ¨°Êï∏ÈÅéÂ§öÔºåÂ∏≥ËôüÂ∑≤ÈéñÂÆö 15 ÂàÜÈêò';
                        lockoutMessage.style.display = 'block';
                    } else {
                        const remainingAttempts = this.config.maxLoginAttempts - this.config.loginAttempts;
                        errorMessage.textContent = `ÁôªÂÖ•Â§±ÊïóÔºåÈÇÑÊúâ ${remainingAttempts} Ê¨°Ê©üÊúÉ`;
                        errorMessage.style.display = 'block';
                    }
                }
                
                // ÊÅ¢Âæ©ÊåâÈàïÁãÄÊÖã
                loginBtn.disabled = false;
                loginBtn.innerHTML = 'üîê ÁôªÂÖ•Á≥ªÁµ±';
            },
            
            // È°ØÁ§∫ÂÑÄË°®Êùø
            showDashboard() {
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
                this.state.isAuthenticated = true;
                
                console.log('üìä ËºâÂÖ•ÂÑÄË°®Êùø...');
                
                // ÈñãÂßãÂÉπÊ†ºÊõ¥Êñ∞
                this.updatePrice();
                this.state.priceUpdateTimer = setInterval(() => {
                    this.updatePrice();
                }, this.config.updateInterval);
                
                // Êõ¥Êñ∞Á≥ªÁµ±ÁãÄÊÖã
                this.updateSystemStatus();
                setInterval(() => {
                    this.updateSystemStatus();
                }, 5000);
                
                console.log('‚úÖ ÂÑÄË°®ÊùøËºâÂÖ•ÂÆåÊàê');
            },
            
            // Êõ¥Êñ∞ÂÉπÊ†º
            async updatePrice() {
                console.log('üì° Ê≠£Âú®Áç≤ÂèñBTC/TWDÂÉπÊ†º...');
                
                try {
                    // ‰ΩøÁî®Êô∫ËÉΩ API ÈÅ©ÈÖçÂô®
                    const data = await window.smartAPIAdapter.getCurrentPrice();
                    
                    if (data && data.last) {
                        const newPrice = parseFloat(data.last);
                        const oldPrice = this.state.currentPrice;
                        
                        // Êõ¥Êñ∞ÂÉπÊ†ºÈ°ØÁ§∫
                        this.displayPrice(newPrice, oldPrice);
                        this.state.currentPrice = newPrice;
                        this.state.lastUpdate = new Date();
                        
                        // Êõ¥Êñ∞ÁãÄÊÖãÊåáÁ§∫Âô®
                        document.getElementById('priceIndicator').className = 'status-indicator online';
                        
                        // È°ØÁ§∫Êï∏Êìö‰æÜÊ∫ê‰ø°ÊÅØ
                        const changeElement = document.getElementById('priceChange');
                        if (changeElement && data._meta) {
                            const dataAge = data._meta.data_age_seconds || 0;
                            const method = data._meta.fetch_method || 'unknown';
                            
                            if (dataAge > 300) { // 5ÂàÜÈêò‰ª•‰∏ä
                                changeElement.textContent = `Êï∏Êìö‰æÜÊ∫ê: ${data.source} (${Math.floor(dataAge/60)}ÂàÜÈêòÂâç)`;
                                changeElement.style.color = '#e17055';
                            } else if (dataAge > 60) { // 1ÂàÜÈêò‰ª•‰∏ä
                                changeElement.textContent = `Êï∏Êìö‰æÜÊ∫ê: ${data.source} (${dataAge}ÁßíÂâç)`;
                                changeElement.style.color = '#f39c12';
                            } else {
                                // È°ØÁ§∫ÂÉπÊ†ºËÆäÂåñ
                                if (oldPrice && newPrice !== oldPrice) {
                                    if (newPrice > oldPrice) {
                                        changeElement.textContent = `ËÆäÂåñ: ‚ÜóÔ∏è +${((newPrice - oldPrice) / oldPrice * 100).toFixed(2)}%`;
                                        changeElement.style.color = '#00b894';
                                    } else {
                                        changeElement.textContent = `ËÆäÂåñ: ‚ÜòÔ∏è ${((newPrice - oldPrice) / oldPrice * 100).toFixed(2)}%`;
                                        changeElement.style.color = '#e17055';
                                    }
                                } else {
                                    changeElement.textContent = `Êï∏Êìö‰æÜÊ∫ê: ${data.source}`;
                                    changeElement.style.color = '#666';
                                }
                            }
                        }
                        
                        console.log(`üí∞ ÂÉπÊ†ºÂ∑≤Êõ¥Êñ∞: ${data._meta?.formatted_price || `NT$${newPrice.toLocaleString()}`}`);
                        console.log(`üìä Êï∏Êìö‰æÜÊ∫ê: ${data.source} (${data._meta?.fetch_method || 'unknown'})`);
                        
                        return;
                    }
                    
                    throw new Error('Áç≤ÂèñÁöÑÊï∏ÊìöÊ†ºÂºèÁÑ°Êïà');
                    
                } catch (error) {
                    console.error('‚ùå ÂÉπÊ†ºÊõ¥Êñ∞Â§±Êïó:', error);
                    this.displayPriceError(`ÁÑ°Ê≥ïÁç≤ÂèñÂÉπÊ†ºÊï∏Êìö: ${error.message}`);
                    document.getElementById('priceIndicator').className = 'status-indicator offline';
                }
            },
            
            // È°ØÁ§∫ÂÉπÊ†º
            displayPrice(price, oldPrice) {
                const priceElement = document.getElementById('btcPrice');
                const changeElement = document.getElementById('priceChange');
                const updateElement = document.getElementById('lastPriceUpdate');
                
                if (priceElement) {
                    priceElement.textContent = `NT$${price.toLocaleString()}`;
                    priceElement.classList.add('price-update');
                    
                    // ÂÉπÊ†ºËÆäÂåñÈ°èËâ≤
                    if (oldPrice && price !== oldPrice) {
                        if (price > oldPrice) {
                            priceElement.style.color = '#00b894';
                            changeElement.textContent = `ËÆäÂåñ: ‚ÜóÔ∏è +${((price - oldPrice) / oldPrice * 100).toFixed(2)}%`;
                            changeElement.style.color = '#00b894';
                        } else {
                            priceElement.style.color = '#e17055';
                            changeElement.textContent = `ËÆäÂåñ: ‚ÜòÔ∏è ${((price - oldPrice) / oldPrice * 100).toFixed(2)}%`;
                            changeElement.style.color = '#e17055';
                        }
                    } else {
                        changeElement.textContent = 'ËÆäÂåñ: MAX API Âç≥ÊôÇ';
                        changeElement.style.color = '#666';
                    }
                    
                    updateElement.textContent = `Êõ¥Êñ∞ÊôÇÈñì: ${new Date().toLocaleString('zh-TW')}`;
                    
                    // ÁßªÈô§ÂãïÁï´È°û
                    setTimeout(() => {
                        priceElement.classList.remove('price-update');
                        priceElement.style.color = '#00b894';
                    }, 300);
                }
            },
            
            // È°ØÁ§∫ÂÉπÊ†ºÈåØË™§
            displayPriceError(errorMessage) {
                const priceElement = document.getElementById('btcPrice');
                const changeElement = document.getElementById('priceChange');
                const updateElement = document.getElementById('lastPriceUpdate');
                
                if (priceElement) {
                    priceElement.textContent = 'ÁÑ°Ê≥ïÈÄ£Êé• MAX API';
                    priceElement.style.color = '#e17055';
                    changeElement.textContent = `ÈåØË™§: ${errorMessage}`;
                    changeElement.style.color = '#e17055';
                    updateElement.textContent = `ÈåØË™§ÊôÇÈñì: ${new Date().toLocaleString('zh-TW')}`;
                }
            },
            
            // Êõ¥Êñ∞Á≥ªÁµ±ÁãÄÊÖã
            updateSystemStatus() {
                const statusElement = document.getElementById('systemStatus');
                const uptimeElement = document.getElementById('systemUptime');
                const updateElement = document.getElementById('lastSystemUpdate');
                const indicatorElement = document.getElementById('systemIndicator');
                
                if (statusElement) {
                    statusElement.textContent = 'ÈÅãË°åÊ≠£Â∏∏';
                    indicatorElement.className = 'status-indicator online';
                    
                    // Ë®àÁÆóÈÅãË°åÊôÇÈñì
                    const uptime = new Date() - this.state.systemStartTime;
                    const hours = Math.floor(uptime / (1000 * 60 * 60));
                    const minutes = Math.floor((uptime % (1000 * 60 * 60)) / (1000 * 60));
                    uptimeElement.textContent = `${hours}h ${minutes}m`;
                    
                    updateElement.textContent = `Á≥ªÁµ±ÂïüÂãïÊôÇÈñì: ${this.state.systemStartTime.toLocaleString('zh-TW')}`;
                }
            },
            
            // Á∑äÊÄ•ÂÅúÊ≠¢
            emergencyStop() {
                if (confirm('‚ö†Ô∏è Á¢∫ÂÆöË¶ÅÂü∑Ë°åÁ∑äÊÄ•ÂÅúÊ≠¢ÂóéÔºüÈÄôÂ∞áÂÅúÊ≠¢ÊâÄÊúâ‰∫§ÊòìÊ¥ªÂãï„ÄÇ')) {
                    console.log('üö® Âü∑Ë°åÁ∑äÊÄ•ÂÅúÊ≠¢...');
                    
                    // ÂÅúÊ≠¢ÂÉπÊ†ºÊõ¥Êñ∞
                    if (this.state.priceUpdateTimer) {
                        clearInterval(this.state.priceUpdateTimer);
                        this.state.priceUpdateTimer = null;
                    }
                    
                    // Êõ¥Êñ∞ÁãÄÊÖãÊåáÁ§∫Âô®
                    document.getElementById('priceIndicator').className = 'status-indicator offline';
                    document.getElementById('systemIndicator').className = 'status-indicator offline';
                    
                    // È°ØÁ§∫ÂÅúÊ≠¢ÁãÄÊÖã
                    document.getElementById('btcPrice').textContent = 'Á≥ªÁµ±Â∑≤ÂÅúÊ≠¢';
                    document.getElementById('btcPrice').style.color = '#e17055';
                    document.getElementById('priceChange').textContent = 'Á∑äÊÄ•ÂÅúÊ≠¢Â∑≤ÂïüÁî®';
                    document.getElementById('priceChange').style.color = '#e17055';
                    document.getElementById('systemStatus').textContent = 'Â∑≤ÂÅúÊ≠¢';
                    
                    alert('üö® Á∑äÊÄ•ÂÅúÊ≠¢Â∑≤Âü∑Ë°åÔºÅÊâÄÊúâ‰∫§ÊòìÊ¥ªÂãïÂ∑≤Êö´ÂÅú„ÄÇ');
                    console.log('‚úÖ Á∑äÊÄ•ÂÅúÊ≠¢Âü∑Ë°åÂÆåÊàê');
                }
            },
            
            // ÁôªÂá∫
            logout() {
                if (confirm('Á¢∫ÂÆöË¶ÅÁôªÂá∫ÂóéÔºü')) {
                    console.log('üö™ Áî®Êà∂ÁôªÂá∫...');
                    
                    // Ê∏ÖÈô§Ë™çË≠âÁãÄÊÖã
                    localStorage.removeItem('aimax_authenticated');
                    this.state.isAuthenticated = false;
                    
                    // ÂÅúÊ≠¢ÂÆöÊôÇÂô®
                    if (this.state.priceUpdateTimer) {
                        clearInterval(this.state.priceUpdateTimer);
                        this.state.priceUpdateTimer = null;
                    }
                    
                    // È°ØÁ§∫ÁôªÂÖ•ÁïåÈù¢
                    document.getElementById('dashboard').style.display = 'none';
                    document.getElementById('loginContainer').style.display = 'flex';
                    
                    // Ê∏ÖÁ©∫Ë°®ÂñÆ
                    document.getElementById('username').value = '';
                    document.getElementById('password').value = '';
                    
                    console.log('‚úÖ ÁôªÂá∫ÂÆåÊàê');
                }
            }
        };
        
        // È†ÅÈù¢ËºâÂÖ•ÂÆåÊàêÂæåÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            CleanDashboard.init();
        });
        
        // È†ÅÈù¢Âç∏ËºâÊôÇÊ∏ÖÁêÜ
        window.addEventListener('beforeunload', function() {
            if (CleanDashboard.state.priceUpdateTimer) {
                clearInterval(CleanDashboard.state.priceUpdateTimer);
            }
        });
    </script>
</body>
</html>