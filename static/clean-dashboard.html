<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AImax æ™ºèƒ½äº¤æ˜“ç³»çµ± v3.0 - é›²ç«¯ç‰ˆ</title>
    
    <!-- å®‰å…¨æ¨™é ­ -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    
    <!-- ç¦æ­¢æœç´¢å¼•æ“ç´¢å¼• -->
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    
    <!-- å…§åµŒCSSæ¨£å¼ -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        /* ç™»å…¥ç•Œé¢æ¨£å¼ */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .login-card {
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
        }
        
        .logo {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo h1 {
            color: #6c5ce7;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .logo p {
            color: #666;
            font-size: 1.1em;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #6c5ce7;
        }
        
        .login-btn {
            width: 100%;
            padding: 14px;
            background: #6c5ce7;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .login-btn:hover {
            background: #5a4fcf;
        }
        
        .login-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .error-message {
            color: #e17055;
            text-align: center;
            margin-top: 15px;
            padding: 10px;
            background: #ffeaa7;
            border-radius: 6px;
            display: none;
        }
        
        .lockout-message {
            color: #d63031;
            text-align: center;
            margin-top: 15px;
            padding: 10px;
            background: #fab1a0;
            border-radius: 6px;
            display: none;
        }
        
        /* å„€è¡¨æ¿æ¨£å¼ */
        .dashboard {
            display: none;
            min-height: 100vh;
            padding: 20px;
        }
        
        .dashboard-header {
            background: rgba(255,255,255,0.95);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .dashboard-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .dashboard-title h1 {
            color: #6c5ce7;
            font-size: 2em;
            margin-bottom: 5px;
        }
        
        .dashboard-title .subtitle {
            color: #666;
            font-size: 1.1em;
        }
        
        .logout-btn {
            background: #e17055;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s;
        }
        
        .logout-btn:hover {
            background: #d63031;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .card {
            background: rgba(255,255,255,0.95);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        
        .card:hover {
            transform: translateY(-2px);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .card-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #333;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }
        
        .status-indicator.online {
            background: #00b894;
            box-shadow: 0 0 10px rgba(0,184,148,0.5);
        }
        
        .status-indicator.offline {
            background: #e17055;
            box-shadow: 0 0 10px rgba(225,112,85,0.5);
        }
        
        .price-display {
            font-size: 2.5em;
            font-weight: 700;
            color: #00b894;
            margin: 15px 0;
            text-align: center;
        }
        
        .price-change {
            text-align: center;
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        
        .last-update {
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }
        
        .strategy-info {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .strategy-info h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }
        
        .strategy-info p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .emergency-stop {
            background: #d63031;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 15px;
            transition: background 0.3s;
        }
        
        .emergency-stop:hover {
            background: #b71c1c;
        }
        
        .system-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-item {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .stat-value {
            font-size: 1.5em;
            font-weight: 600;
            color: #6c5ce7;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
        
        .price-update {
            animation: priceFlash 0.3s ease-in-out;
        }
        
        @keyframes priceFlash {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .dashboard-title {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .dashboard-title h1 {
                font-size: 1.5em;
            }
            
            .logout-btn {
                margin-top: 10px;
                align-self: stretch;
            }
            
            .price-display {
                font-size: 2em;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* è¼‰å…¥å‹•ç•« */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #6c5ce7;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- ç™»å…¥ç•Œé¢ -->
    <div id="loginContainer" class="login-container">
        <div class="login-card">
            <div class="logo">
                <h1>ğŸ¤– AImax</h1>
                <p>æ™ºèƒ½äº¤æ˜“ç³»çµ± v3.0 - é›²ç«¯ç‰ˆ</p>
                <p style="font-size: 0.9em; color: #00b894; margin-top: 10px;">85%å‹ç‡ç›®æ¨™ | MAX API å³æ™‚åƒ¹æ ¼</p>
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">å¸³è™Ÿ</label>
                    <input type="text" id="username" name="username" required autocomplete="username">
                </div>
                
                <div class="form-group">
                    <label for="password">å¯†ç¢¼</label>
                    <input type="password" id="password" name="password" required autocomplete="current-password">
                </div>
                
                <button type="submit" class="login-btn" id="loginBtn">
                    ğŸ” ç™»å…¥ç³»çµ±
                </button>
            </form>
            
            <div id="errorMessage" class="error-message"></div>
            <div id="lockoutMessage" class="lockout-message"></div>
        </div>
    </div>
    
    <!-- å„€è¡¨æ¿ç•Œé¢ -->
    <div id="dashboard" class="dashboard">
        <div class="dashboard-header">
            <div class="dashboard-title">
                <div>
                    <h1>ğŸ¤– AImax äº¤æ˜“ç³»çµ±</h1>
                    <p class="subtitle">v3.0 é›²ç«¯ç‰ˆ - 85%å‹ç‡æ™ºèƒ½äº¤æ˜“ç­–ç•¥</p>
                </div>
                <button class="logout-btn" onclick="CleanDashboard.logout()">
                    ğŸšª ç™»å‡º
                </button>
            </div>
        </div>
        
        <div class="dashboard-grid">
            <!-- BTCåƒ¹æ ¼å¡ç‰‡ -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">ğŸ’° BTC/TWD å³æ™‚åƒ¹æ ¼</span>
                    <span class="status-indicator online" id="priceIndicator"></span>
                </div>
                
                <div class="price-display" id="btcPrice">è¼‰å…¥ä¸­...</div>
                <div class="price-change" id="priceChange">æ­£åœ¨é€£æ¥ MAX API...</div>
                <div class="last-update" id="lastPriceUpdate">ç­‰å¾…æ•¸æ“š...</div>
                
                <div class="strategy-info">
                    <h3>ğŸ¯ 85%å‹ç‡ç­–ç•¥</h3>
                    <p>æ™ºèƒ½æ¼”ç®—æ³•å·²å•Ÿç”¨ä¸¦å—åˆ°ä¿è­·</p>
                </div>
            </div>
            
            <!-- ç³»çµ±ç‹€æ…‹å¡ç‰‡ -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">ğŸ“Š ç³»çµ±ç‹€æ…‹</span>
                    <span class="status-indicator online" id="systemIndicator"></span>
                </div>
                
                <div class="system-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="systemStatus">é‹è¡Œæ­£å¸¸</div>
                        <div class="stat-label">ç³»çµ±ç‹€æ…‹</div>
                    </div>
                    
                    <div class="stat-item">
                        <div class="stat-value" id="systemUptime">è¨ˆç®—ä¸­...</div>
                        <div class="stat-label">é‹è¡Œæ™‚é–“</div>
                    </div>
                    
                    <div class="stat-item">
                        <div class="stat-value">MAX API</div>
                        <div class="stat-label">æ•¸æ“šä¾†æº</div>
                    </div>
                    
                    <div class="stat-item">
                        <div class="stat-value">30ç§’</div>
                        <div class="stat-label">æ›´æ–°é–“éš”</div>
                    </div>
                </div>
                
                <div class="last-update" id="lastSystemUpdate">ç³»çµ±å•Ÿå‹•æ™‚é–“: è¨ˆç®—ä¸­...</div>
                
                <button class="emergency-stop" onclick="CleanDashboard.emergencyStop()">
                    ğŸš¨ ç·Šæ€¥åœæ­¢
                </button>
            </div>
        </div>
    </div>
    
    <!-- ç›´æ¥ MAX API èª¿ç”¨ -->
    
    <!-- JavaScript é‚è¼¯ -->
    <script>
        // å…¨å±€å‘½åç©ºé–“ï¼Œé¿å…è¡çª
        window.CleanDashboard = {
            // é…ç½®
            config: {
                maxApiUrl: 'https://max-api.maicoin.com/api/v2/tickers/btctwd', // MAX API v2 æ­£ç¢ºç«¯é»
                maxApiUrlProxy: 'http://localhost:5000/api/btc-price', // æœ¬åœ°ä»£ç†ï¼ˆå¦‚æœå¯ç”¨ï¼‰
                corsProxyUrl: 'https://api.allorigins.win/raw?url=', // CORS ä»£ç†
                updateInterval: 30000, // 30ç§’
                loginAttempts: 0,
                maxLoginAttempts: 5,
                lockoutTime: 15 * 60 * 1000 // 15åˆ†é˜
            },
            
            // ç‹€æ…‹
            state: {
                isAuthenticated: false,
                currentPrice: null,
                lastUpdate: null,
                systemStartTime: new Date(),
                priceUpdateTimer: null
            },
            
            // åˆå§‹åŒ–
            init() {
                console.log('ğŸš€ AImax v3.0 é›²ç«¯ç‰ˆç³»çµ±å•Ÿå‹•...');
                
                // ç¶å®šç™»å…¥è¡¨å–®äº‹ä»¶
                const loginForm = document.getElementById('loginForm');
                if (loginForm) {
                    loginForm.addEventListener('submit', this.handleLogin.bind(this));
                }
                
                // æª¢æŸ¥æ˜¯å¦å·²ç™»å…¥
                if (localStorage.getItem('aimax_authenticated') === 'true') {
                    this.showDashboard();
                }
                
                console.log('âœ… ç³»çµ±åˆå§‹åŒ–å®Œæˆ');
            },
            
            // è™•ç†ç™»å…¥
            async handleLogin(event) {
                event.preventDefault();
                
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                const loginBtn = document.getElementById('loginBtn');
                const errorMessage = document.getElementById('errorMessage');
                const lockoutMessage = document.getElementById('lockoutMessage');
                
                // æª¢æŸ¥é–å®šç‹€æ…‹
                const lockoutEnd = localStorage.getItem('aimax_lockout_end');
                if (lockoutEnd && new Date() < new Date(lockoutEnd)) {
                    const remainingTime = Math.ceil((new Date(lockoutEnd) - new Date()) / 1000 / 60);
                    lockoutMessage.textContent = `å¸³è™Ÿå·²é–å®šï¼Œè«‹ç­‰å¾… ${remainingTime} åˆ†é˜å¾Œå†è©¦`;
                    lockoutMessage.style.display = 'block';
                    return;
                }
                
                // é¡¯ç¤ºè¼‰å…¥ç‹€æ…‹
                loginBtn.disabled = true;
                loginBtn.innerHTML = '<span class="loading"></span> é©—è­‰ä¸­...';
                errorMessage.style.display = 'none';
                lockoutMessage.style.display = 'none';
                
                // æ¨¡æ“¬é©—è­‰å»¶é²
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // é©—è­‰æ†‘è­‰
                if (username === 'admin' && password === 'aimax2025') {
                    console.log('âœ… ç™»å…¥æˆåŠŸ');
                    localStorage.setItem('aimax_authenticated', 'true');
                    localStorage.removeItem('aimax_login_attempts');
                    localStorage.removeItem('aimax_lockout_end');
                    this.showDashboard();
                } else {
                    console.log('âŒ ç™»å…¥å¤±æ•—');
                    this.config.loginAttempts++;
                    localStorage.setItem('aimax_login_attempts', this.config.loginAttempts.toString());
                    
                    if (this.config.loginAttempts >= this.config.maxLoginAttempts) {
                        const lockoutEnd = new Date(Date.now() + this.config.lockoutTime);
                        localStorage.setItem('aimax_lockout_end', lockoutEnd.toISOString());
                        lockoutMessage.textContent = 'ç™»å…¥å¤±æ•—æ¬¡æ•¸éå¤šï¼Œå¸³è™Ÿå·²é–å®š 15 åˆ†é˜';
                        lockoutMessage.style.display = 'block';
                    } else {
                        const remainingAttempts = this.config.maxLoginAttempts - this.config.loginAttempts;
                        errorMessage.textContent = `ç™»å…¥å¤±æ•—ï¼Œé‚„æœ‰ ${remainingAttempts} æ¬¡æ©Ÿæœƒ`;
                        errorMessage.style.display = 'block';
                    }
                }
                
                // æ¢å¾©æŒ‰éˆ•ç‹€æ…‹
                loginBtn.disabled = false;
                loginBtn.innerHTML = 'ğŸ” ç™»å…¥ç³»çµ±';
            },
            
            // é¡¯ç¤ºå„€è¡¨æ¿
            showDashboard() {
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
                this.state.isAuthenticated = true;
                
                console.log('ğŸ“Š è¼‰å…¥å„€è¡¨æ¿...');
                
                // é–‹å§‹åƒ¹æ ¼æ›´æ–°
                this.updatePrice();
                this.state.priceUpdateTimer = setInterval(() => {
                    this.updatePrice();
                }, this.config.updateInterval);
                
                // æ›´æ–°ç³»çµ±ç‹€æ…‹
                this.updateSystemStatus();
                setInterval(() => {
                    this.updateSystemStatus();
                }, 5000);
                
                console.log('âœ… å„€è¡¨æ¿è¼‰å…¥å®Œæˆ');
            },
            
            // æ›´æ–°åƒ¹æ ¼
            async updatePrice() {
                console.log('ğŸ“¡ æ­£åœ¨ç²å–BTC/TWDåƒ¹æ ¼...');
                
                try {
                    // ä½¿ç”¨æ™ºèƒ½ API é©é…å™¨
                    const data = await window.smartAPIAdapter.getCurrentPrice();
                    
                    if (data && data.last) {
                        const newPrice = parseFloat(data.last);
                        const oldPrice = this.state.currentPrice;
                        
                        // æ›´æ–°åƒ¹æ ¼é¡¯ç¤º
                        this.displayPrice(newPrice, oldPrice);
                        this.state.currentPrice = newPrice;
                        this.state.lastUpdate = new Date();
                        
                        // æ›´æ–°ç‹€æ…‹æŒ‡ç¤ºå™¨
                        document.getElementById('priceIndicator').className = 'status-indicator online';
                        
                        // é¡¯ç¤ºæ•¸æ“šä¾†æºä¿¡æ¯
                        const changeElement = document.getElementById('priceChange');
                        if (changeElement && data._meta) {
                            const dataAge = data._meta.data_age_seconds || 0;
                            const method = data._meta.fetch_method || 'unknown';
                            
                            if (dataAge > 300) { // 5åˆ†é˜ä»¥ä¸Š
                                changeElement.textContent = `æ•¸æ“šä¾†æº: ${data.source} (${Math.floor(dataAge/60)}åˆ†é˜å‰)`;
                                changeElement.style.color = '#e17055';
                            } else if (dataAge > 60) { // 1åˆ†é˜ä»¥ä¸Š
                                changeElement.textContent = `æ•¸æ“šä¾†æº: ${data.source} (${dataAge}ç§’å‰)`;
                                changeElement.style.color = '#f39c12';
                            } else {
                                // é¡¯ç¤ºåƒ¹æ ¼è®ŠåŒ–
                                if (oldPrice && newPrice !== oldPrice) {
                                    if (newPrice > oldPrice) {
                                        changeElement.textContent = `è®ŠåŒ–: â†—ï¸ +${((newPrice - oldPrice) / oldPrice * 100).toFixed(2)}%`;
                                        changeElement.style.color = '#00b894';
                                    } else {
                                        changeElement.textContent = `è®ŠåŒ–: â†˜ï¸ ${((newPrice - oldPrice) / oldPrice * 100).toFixed(2)}%`;
                                        changeElement.style.color = '#e17055';
                                    }
                                } else {
                                    changeElement.textContent = `æ•¸æ“šä¾†æº: ${data.source}`;
                                    changeElement.style.color = '#666';
                                }
                            }
                        }
                        
                        console.log(`ğŸ’° åƒ¹æ ¼å·²æ›´æ–°: ${data._meta?.formatted_price || `NT$${newPrice.toLocaleString()}`}`);
                        console.log(`ğŸ“Š æ•¸æ“šä¾†æº: ${data.source} (${data._meta?.fetch_method || 'unknown'})`);
                        
                        return;
                    }
                    
                    throw new Error('ç²å–çš„æ•¸æ“šæ ¼å¼ç„¡æ•ˆ');
                    
                } catch (error) {
                    console.error('âŒ åƒ¹æ ¼æ›´æ–°å¤±æ•—:', error);
                    this.displayPriceError(`ç„¡æ³•ç²å–åƒ¹æ ¼æ•¸æ“š: ${error.message}`);
                    document.getElementById('priceIndicator').className = 'status-indicator offline';
                }
            },
            
            // é¡¯ç¤ºåƒ¹æ ¼
            displayPrice(price, oldPrice) {
                const priceElement = document.getElementById('btcPrice');
                const changeElement = document.getElementById('priceChange');
                const updateElement = document.getElementById('lastPriceUpdate');
                
                if (priceElement) {
                    priceElement.textContent = `NT$${price.toLocaleString()}`;
                    priceElement.classList.add('price-update');
                    
                    // åƒ¹æ ¼è®ŠåŒ–é¡è‰²
                    if (oldPrice && price !== oldPrice) {
                        if (price > oldPrice) {
                            priceElement.style.color = '#00b894';
                            changeElement.textContent = `è®ŠåŒ–: â†—ï¸ +${((price - oldPrice) / oldPrice * 100).toFixed(2)}%`;
                            changeElement.style.color = '#00b894';
                        } else {
                            priceElement.style.color = '#e17055';
                            changeElement.textContent = `è®ŠåŒ–: â†˜ï¸ ${((price - oldPrice) / oldPrice * 100).toFixed(2)}%`;
                            changeElement.style.color = '#e17055';
                        }
                    } else {
                        changeElement.textContent = 'è®ŠåŒ–: MAX API å³æ™‚';
                        changeElement.style.color = '#666';
                    }
                    
                    updateElement.textContent = `æ›´æ–°æ™‚é–“: ${new Date().toLocaleString('zh-TW')}`;
                    
                    // ç§»é™¤å‹•ç•«é¡
                    setTimeout(() => {
                        priceElement.classList.remove('price-update');
                        priceElement.style.color = '#00b894';
                    }, 300);
                }
            },
            
            // é¡¯ç¤ºåƒ¹æ ¼éŒ¯èª¤
            displayPriceError(errorMessage) {
                const priceElement = document.getElementById('btcPrice');
                const changeElement = document.getElementById('priceChange');
                const updateElement = document.getElementById('lastPriceUpdate');
                
                if (priceElement) {
                    priceElement.textContent = 'ç„¡æ³•é€£æ¥ MAX API';
                    priceElement.style.color = '#e17055';
                    changeElement.textContent = `éŒ¯èª¤: ${errorMessage}`;
                    changeElement.style.color = '#e17055';
                    updateElement.textContent = `éŒ¯èª¤æ™‚é–“: ${new Date().toLocaleString('zh-TW')}`;
                }
            },
            
            // æ›´æ–°ç³»çµ±ç‹€æ…‹
            updateSystemStatus() {
                const statusElement = document.getElementById('systemStatus');
                const uptimeElement = document.getElementById('systemUptime');
                const updateElement = document.getElementById('lastSystemUpdate');
                const indicatorElement = document.getElementById('systemIndicator');
                
                if (statusElement) {
                    statusElement.textContent = 'é‹è¡Œæ­£å¸¸';
                    indicatorElement.className = 'status-indicator online';
                    
                    // è¨ˆç®—é‹è¡Œæ™‚é–“
                    const uptime = new Date() - this.state.systemStartTime;
                    const hours = Math.floor(uptime / (1000 * 60 * 60));
                    const minutes = Math.floor((uptime % (1000 * 60 * 60)) / (1000 * 60));
                    uptimeElement.textContent = `${hours}h ${minutes}m`;
                    
                    updateElement.textContent = `ç³»çµ±å•Ÿå‹•æ™‚é–“: ${this.state.systemStartTime.toLocaleString('zh-TW')}`;
                }
            },
            
            // ç·Šæ€¥åœæ­¢
            emergencyStop() {
                if (confirm('âš ï¸ ç¢ºå®šè¦åŸ·è¡Œç·Šæ€¥åœæ­¢å—ï¼Ÿé€™å°‡åœæ­¢æ‰€æœ‰äº¤æ˜“æ´»å‹•ã€‚')) {
                    console.log('ğŸš¨ åŸ·è¡Œç·Šæ€¥åœæ­¢...');
                    
                    // åœæ­¢åƒ¹æ ¼æ›´æ–°
                    if (this.state.priceUpdateTimer) {
                        clearInterval(this.state.priceUpdateTimer);
                        this.state.priceUpdateTimer = null;
                    }
                    
                    // æ›´æ–°ç‹€æ…‹æŒ‡ç¤ºå™¨
                    document.getElementById('priceIndicator').className = 'status-indicator offline';
                    document.getElementById('systemIndicator').className = 'status-indicator offline';
                    
                    // é¡¯ç¤ºåœæ­¢ç‹€æ…‹
                    document.getElementById('btcPrice').textContent = 'ç³»çµ±å·²åœæ­¢';
                    document.getElementById('btcPrice').style.color = '#e17055';
                    document.getElementById('priceChange').textContent = 'ç·Šæ€¥åœæ­¢å·²å•Ÿç”¨';
                    document.getElementById('priceChange').style.color = '#e17055';
                    document.getElementById('systemStatus').textContent = 'å·²åœæ­¢';
                    
                    alert('ğŸš¨ ç·Šæ€¥åœæ­¢å·²åŸ·è¡Œï¼æ‰€æœ‰äº¤æ˜“æ´»å‹•å·²æš«åœã€‚');
                    console.log('âœ… ç·Šæ€¥åœæ­¢åŸ·è¡Œå®Œæˆ');
                }
            },
            
            // ç™»å‡º
            logout() {
                if (confirm('ç¢ºå®šè¦ç™»å‡ºå—ï¼Ÿ')) {
                    console.log('ğŸšª ç”¨æˆ¶ç™»å‡º...');
                    
                    // æ¸…é™¤èªè­‰ç‹€æ…‹
                    localStorage.removeItem('aimax_authenticated');
                    this.state.isAuthenticated = false;
                    
                    // åœæ­¢å®šæ™‚å™¨
                    if (this.state.priceUpdateTimer) {
                        clearInterval(this.state.priceUpdateTimer);
                        this.state.priceUpdateTimer = null;
                    }
                    
                    // é¡¯ç¤ºç™»å…¥ç•Œé¢
                    document.getElementById('dashboard').style.display = 'none';
                    document.getElementById('loginContainer').style.display = 'flex';
                    
                    // æ¸…ç©ºè¡¨å–®
                    document.getElementById('username').value = '';
                    document.getElementById('password').value = '';
                    
                    console.log('âœ… ç™»å‡ºå®Œæˆ');
                }
            }
        };
        
        // é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            CleanDashboard.init();
        });
        
        // é é¢å¸è¼‰æ™‚æ¸…ç†
        window.addEventListener('beforeunload', function() {
            if (CleanDashboard.state.priceUpdateTimer) {
                clearInterval(CleanDashboard.state.priceUpdateTimer);
            }
        });
    </script>
</body>
</html>