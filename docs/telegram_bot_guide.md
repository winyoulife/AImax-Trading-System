# AImax Telegram機器人使用指南

## 🤖 功能概述

AImax Telegram機器人提供雙向互動功能，讓你可以在手機上：
- 接收自動交易信號推送
- 發送指令查詢市場信息
- 獲取實時價格和技術指標
- 查看獲利統計和系統狀態

## 📋 設置步驟

### 1. 創建Telegram機器人

1. 在Telegram中搜索 `@BotFather`
2. 發送 `/newbot` 創建新機器人
3. 按提示設置機器人名稱（例如：AImax Trading Bot）
4. 設置機器人用戶名（例如：aimax_trading_bot）
5. 獲取Bot Token（格式：`123456789:ABCdefGHIjklMNOpqrsTUVwxyz`）

### 2. 獲取Chat ID

1. 在Telegram中搜索你剛創建的機器人
2. 點擊 `START` 或發送 `/start`
3. 發送任意消息給機器人
4. 訪問以下URL（替換YOUR_BOT_TOKEN）：
   ```
   https://api.telegram.org/botYOUR_BOT_TOKEN/getUpdates
   ```
5. 在返回的JSON中找到 `"chat"` -> `"id"` 的值

### 3. 配置機器人

運行設置助手：
```bash
python scripts/setup_telegram_bot.py
```

或手動創建配置文件 `config/telegram_secrets.txt`：
```
BOT_TOKEN=你的機器人token
CHAT_ID=你的聊天ID
```

## 🚀 啟動機器人

### 方式1：基本機器人（僅指令回覆）
```bash
python scripts/run_telegram_bot.py
```

### 方式2：整合監控系統（推薦）
```bash
python scripts/integrated_telegram_monitor.py
```

整合系統包含：
- 🤖 雙向指令回覆
- 📡 自動交易信號推送
- ⚠️ 價格警報通知（變化>5%）
- 📊 每日市場總結（早上9點）

## 💬 支持的指令

### 中文指令
- `狀態` - 查看系統運行狀態
- `價格` - 獲取當前BTC價格
- `指標` - 顯示MACD技術指標
- `信號` - 查看最新交易信號
- `獲利` - 顯示獲利統計
- `幫助` - 顯示幫助信息

### 英文指令
- `/start` - 開始使用機器人
- `/help` - 顯示幫助信息
- `/status` - 系統狀態
- `/price` - 當前價格
- `/macd` - MACD指標
- `/signals` - 交易信號
- `/profit` - 獲利統計
- `/stop` - 停止機器人

## 📡 自動通知功能

### 交易信號推送
當檢測到MACD交易信號時，機器人會自動發送通知：
```
🟢 MACD交易信號 🟢

🎯 動作: 買進
💰 價格: $45,123.45
⏰ 時間: 2024-01-15 14:30:00

📊 技術指標:
• MACD: 0.0123
• 信號線: 0.0098
• 柱狀圖: 0.0025

💡 AImax 1小時MACD策略
```

### 價格警報
當價格變化超過5%時發送警報：
```
📈 價格警報 📈

💰 當前價格: $47,500.00
📊 變化幅度: +5.2%
🎨 趨勢: 上漲 (綠色)
⏰ 時間: 2024-01-15 15:45:00

⚠️ 注意: 價格波動較大，請注意風險控制
```

### 每日總結
每天早上9點自動發送市場總結：
```
📊 每日市場總結

📅 日期: 2024-01-15

💰 價格統計:
• 當前價格: $45,678.90
• 今日最高: $46,123.45
• 今日最低: $44,567.89
• 日內變化: +$1,111.01 (+2.49%)

📡 信號統計:
• 買進信號: 2 個
• 賣出信號: 1 個
• 總信號數: 3 個
```

## 🔧 故障排除

### 常見問題

1. **機器人無回應**
   - 檢查Bot Token是否正確
   - 確認已向機器人發送過消息
   - 檢查網絡連接

2. **Chat ID錯誤**
   - 重新獲取Chat ID
   - 確保使用正確的數字格式
   - 檢查是否為群組ID（群組ID通常為負數）

3. **權限錯誤**
   - 確保機器人有發送消息權限
   - 檢查是否被封鎖

### 日誌檢查

查看日誌文件：
```bash
# 基本機器人日誌
tail -f logs/telegram_bot.log

# 整合監控日誌
tail -f logs/integrated_monitor.log
```

## 🔒 安全注意事項

1. **保護敏感信息**
   - 不要將Bot Token分享給他人
   - 不要在公開場所展示Chat ID
   - 定期更換Bot Token

2. **配置文件安全**
   - `telegram_secrets.txt` 已加入 `.gitignore`
   - 不要將配置文件提交到版本控制

3. **使用建議**
   - 僅在私人聊天中使用
   - 定期檢查機器人活動日誌
   - 如有異常立即停止機器人

## 📱 手機使用技巧

1. **快速指令**
   - 使用中文指令更方便輸入
   - 可以設置常用指令為快捷短語

2. **通知設置**
   - 建議開啟Telegram通知
   - 可設置特定時間段免打擾

3. **群組使用**
   - 可將機器人添加到群組
   - 需要獲取群組Chat ID（負數）

## 🆘 技術支持

如遇到問題，請檢查：
1. 配置文件是否正確
2. 網絡連接是否正常
3. 日誌文件中的錯誤信息
4. Telegram API是否可訪問

更多技術細節請參考源代碼註釋。