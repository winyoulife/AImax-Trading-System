name: éƒ¨ç½²AImaxç°¡æ½”ç‰ˆå„€è¡¨æ¿åˆ°GitHub Pages

on:
  push:
    branches: [ main ]
    paths:
      - 'static/clean-dashboard.html'
      - 'static/simple-max-dashboard.html'
      - 'static/test-max-api.html'
      - '.github/workflows/deploy-pages.yml'
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ”„ æª¢å‡ºä»£ç¢¼
        uses: actions/checkout@v4
        
      - name: ğŸ”§ è¨­ç½®Pages
        uses: actions/configure-pages@v4
        
      - name: ğŸ“¦ æº–å‚™ç°¡æ½”ç‰ˆå„€è¡¨æ¿éƒ¨ç½²æ–‡ä»¶
        run: |
          echo "ğŸ“¦ æº–å‚™AImax v3.0ç°¡æ½”ç‰ˆå„€è¡¨æ¿..."
          
          # å‰µå»ºéƒ¨ç½²ç›®éŒ„
          mkdir -p _site
          
          # è¤‡è£½ä¿®å¾©ç‰ˆå®‰å…¨ç™»å…¥é é¢ä½œç‚ºä¸»é 
          cp static/secure-login-fixed.html _site/index.html
          
          # è¤‡è£½ä¿®å¾©ç‰ˆçµ‚æ¥µæ™ºèƒ½å„€è¡¨æ¿
          cp static/dashboard-fixed.html _site/dashboard.html
          
          # è¤‡è£½æ¸¬è©¦é é¢
          cp static/test-max-api.html _site/test-max-api.html
          
          # è¤‡è£½å„ç‰ˆæœ¬å„€è¡¨æ¿ä½œç‚ºå‚™ç”¨
          cp static/clean-dashboard.html _site/clean.html
          cp static/simple-max-dashboard.html _site/simple.html
          cp static/ultimate-smart-dashboard.html _site/smart.html
          
          # è¤‡è£½ä¿®å¾©ç‰ˆæœ¬ä½œç‚ºå‚™ç”¨
          cp static/secure-login-fixed.html _site/login-fixed.html
          cp static/dashboard-fixed.html _site/dashboard-fixed.html
          
          # è¤‡è£½ç™»å…¥æ¸¬è©¦é é¢
          cp static/test-login-only.html _site/test-login.html
          
          # è¤‡è£½JavaScriptæ¨¡çµ„
          mkdir -p _site/js
          cp static/js/github-actions-monitor.js _site/js/
          
          # å‰µå»ºé‡å®šå‘é é¢
          cat > _site/login.html << 'EOF'
          <!DOCTYPE html>
          <html>
          <head>
              <meta http-equiv="refresh" content="0; url=./dashboard.html">
              <title>é‡å®šå‘åˆ° AImax ç™»å…¥é é¢</title>
          </head>
          <body>
              <p>æ­£åœ¨é‡å®šå‘åˆ° <a href="./dashboard.html">AImax ç™»å…¥é é¢</a>...</p>
          </body>
          </html>
          EOF
          
          # å‰µå»ºèªªæ˜é é¢
          cat > _site/README.html << 'EOF'
          <!DOCTYPE html>
          <html lang="zh-TW">
          <head>
              <meta charset="UTF-8">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <title>AImax v3.0 ç°¡æ½”ç‰ˆäº¤æ˜“å„€è¡¨æ¿</title>
              <style>
                  body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
                  .header { background: #6c5ce7; color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
                  .card { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
                  .btn { display: inline-block; background: #00b894; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; margin: 10px 0; }
                  .btn:hover { background: #00a085; }
                  .warning { background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 6px; margin: 20px 0; }
              </style>
          </head>
          <body>
              <div class="header">
                  <h1>ğŸ¤– AImax çµ‚æ¥µæ™ºèƒ½äº¤æ˜“å„€è¡¨æ¿</h1>
                  <p>85%å‹ç‡ç­–ç•¥ â€¢ é«˜é »æ™ºèƒ½äº¤æ˜“ç³»çµ± â€¢ å³æ™‚æ•¸æ“šç›£æ§</p>
              </div>
              
              <div class="card">
                  <h2>ğŸ” å®‰å…¨ç™»å…¥</h2>
                  <a href="./index.html" class="btn">ğŸ”‘ å°ˆå±¬å®‰å…¨ç™»å…¥</a>
                  <a href="./dashboard.html" class="btn">ğŸ¤– çµ‚æ¥µæ™ºèƒ½å„€è¡¨æ¿</a>
                  <a href="./test-login.html" class="btn">ğŸ§ª ç™»å…¥ç³»çµ±æ¸¬è©¦</a>
                  <a href="./simple.html" class="btn">ğŸ’° ç°¡æ½”åƒ¹æ ¼é¡¯ç¤º</a>
                  <p><strong>å°ˆå±¬å¸³è™Ÿç™»å…¥è³‡è¨Šï¼š</strong></p>
                  <ul>
                      <li>å°ˆå±¬å¸³è™Ÿï¼š<code>lovejk1314</code></li>
                      <li>å°ˆå±¬å¯†ç¢¼ï¼š<code>Ichen5978</code></li>
                      <li>å®‰å…¨ç­‰ç´šï¼š<code>SHA-256åŠ å¯†</code></li>
                  </ul>
              </div>
              
              <div class="card">
                  <h2>ğŸ›¡ï¸ å®‰å…¨åŠŸèƒ½ç‰¹è‰²</h2>
                  <ul>
                      <li>ğŸ” å°ˆå±¬å¸³è™Ÿå¯†ç¢¼èªè­‰ç³»çµ±</li>
                      <li>ğŸ›¡ï¸ SHA-256åŠ å¯†æŠ€è¡“ä¿è­·</li>
                      <li>â° 24å°æ™‚æœƒè©±ç®¡ç†</li>
                      <li>ğŸšª å®‰å…¨ç™»å‡ºæ©Ÿåˆ¶</li>
                      <li>ğŸ¤– 85%å‹ç‡é«˜é »äº¤æ˜“ç³»çµ±</li>
                      <li>ğŸ’° MAX API å³æ™‚åƒ¹æ ¼ç›£æ§</li>
                      <li>ğŸ“Š å®Œæ•´ç³»çµ±ç‹€æ…‹é¡¯ç¤º</li>
                      <li>ğŸ“± Telegramå³æ™‚é€šçŸ¥</li>
                  </ul>
              </div>
              
              <div class="warning">
                  <h3>âš ï¸ é‡è¦æé†’</h3>
                  <ul>
                      <li>æ­¤ç‚ºç§æœ‰äº¤æ˜“ç³»çµ±ï¼Œåƒ…é™æˆæ¬Šç”¨æˆ¶ä½¿ç”¨</li>
                      <li>åƒ¹æ ¼æ•¸æ“šç›´æ¥ä¾†è‡ª MAX Exchange å®˜æ–¹ API</li>
                      <li>85%å‹ç‡äº¤æ˜“ç­–ç•¥å·²å•Ÿç”¨ä¸¦å—åˆ°ä¿è­·</li>
                      <li>è«‹å‹¿åœ¨å…¬å…±ç¶²è·¯ç’°å¢ƒä¸‹ä½¿ç”¨</li>
                  </ul>
              </div>
              
              <div class="card">
                  <h2>ğŸ”— ç›¸é—œé€£çµ</h2>
                  <ul>
                      <li><a href="https://github.com/winyoulife/AImax-Trading-System">GitHub å°ˆæ¡ˆ</a></li>
                      <li><a href="https://max.maicoin.com/documents/api">MAX API æ–‡æª”</a></li>
                  </ul>
              </div>
          </body>
          </html>
          EOF
          
          # ç¢ºä¿robots.txtå­˜åœ¨ä¸¦ç¦æ­¢ç´¢å¼•
          echo "# AImax ç§æœ‰äº¤æ˜“ç³»çµ± - ç¦æ­¢æ‰€æœ‰æœç´¢å¼•æ“ç´¢å¼•" > _site/robots.txt
          echo "User-agent: *" >> _site/robots.txt
          echo "Disallow: /" >> _site/robots.txt
          echo "Crawl-delay: 86400" >> _site/robots.txt
          
          # å‰µå»º.nojekyllæ–‡ä»¶
          touch _site/.nojekyll
          
          echo "âœ… ç°¡æ½”ç‰ˆå„€è¡¨æ¿éƒ¨ç½²æ–‡ä»¶æº–å‚™å®Œæˆ"
          echo "ğŸ“ éƒ¨ç½²æ–‡ä»¶åˆ—è¡¨:"
          ls -la _site/
          
      - name: ğŸ“¤ ä¸Šå‚³Pagesæ§‹å»ºç”¢ç‰©
        uses: actions/upload-pages-artifact@v3
        with:
          path: '_site'

  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: ğŸš€ éƒ¨ç½²åˆ°GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
        
      - name: âœ… éƒ¨ç½²å®Œæˆé€šçŸ¥
        run: |
          echo "ğŸ‰ AImax MAX API ç›´é€£ç‰ˆå„€è¡¨æ¿éƒ¨ç½²å®Œæˆï¼"
          echo "ğŸŒ ä¸»é  (å³æ™‚åƒ¹æ ¼): ${{ steps.deployment.outputs.page_url }}"
          echo "ğŸ” å®Œæ•´å„€è¡¨æ¿: ${{ steps.deployment.outputs.page_url }}dashboard.html"
          echo "ğŸ“Š ç™»å…¥å¸³è™Ÿ: admin / å¯†ç¢¼: aimax2025"
          echo "ğŸ’° MAX API: ç›´æ¥é€£æ¥ï¼Œç„¡éœ€ä»£ç†"